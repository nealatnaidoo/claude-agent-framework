# Claude Agent Framework - Package Manifest
# This file tracks versions and dependencies of all components

version: "2.6.0"
updated: "2026-02-03"
description: "Multi-agent development ecosystem for Claude Code"

# Agent definitions with dependencies
agents:
  persona:
    version: "1.0.0"
    file: "agents/persona.md"
    scope: micro
    exclusive_permission: define_user_journeys
    depends_on: []
    depended_by: [design]

  ops:
    version: "1.1.0"
    file: "agents/ops.md"
    scope: macro
    exclusive_permission: execute_deployments
    depends_on: []
    depended_by: [design, ba, back, front]
    tools_managed:
      - db-harness  # Database gates (NN-DB-1 through NN-DB-4)

  design:
    version: "2.3.0"
    file: "agents/design.md"
    scope: micro
    depends_on: [persona, ops]
    depended_by: [ba]

  ba:
    version: "4.2.0"
    file: "agents/ba.md"
    scope: micro
    depends_on: [design, ops]
    depended_by: [back, front]

  back:
    version: "1.0.0"
    file: "agents/back.md"
    scope: micro
    exclusive_permission: write_backend_code
    depends_on: [ba]
    depended_by: [qa, review]

  front:
    version: "1.0.0"
    file: "agents/front.md"
    scope: micro
    exclusive_permission: write_frontend_code
    depends_on: [ba]
    depended_by: [qa, review]

  qa:
    version: "2.3.0"
    file: "agents/qa.md"
    scope: micro
    depends_on: [back, front]
    depended_by: [review]

  review:
    version: "2.3.0"
    file: "agents/review.md"
    scope: micro
    depends_on: [qa, back, front]
    depended_by: [lessons]

  lessons:
    version: "2.0.0"
    file: "agents/lessons.md"
    scope: micro
    depends_on: []
    depended_by: []

  visit:
    version: "1.0.0"
    file: "agents/visit.md"
    scope: template
    depends_on: []
    depended_by: []

# System prompts (methodology documentation)
prompts:
  ba_system:
    version: "4.0.0"
    file: "prompts/system/ba_system_prompt_v4_0_8k.md"

  coding_system:
    version: "4.0.0"
    file: "prompts/system/coding_system_prompt_v4_0_hex_tdd_8k.md"

  solution_designer_system:
    version: "2.0.0"
    file: "prompts/system/solution_designer_system_prompt_v2_0.md"

  qa_system:
    version: "2.0.0"
    file: "prompts/system/qa_system_prompt_v2_0.md"

  code_review_system:
    version: "1.0.0"
    file: "prompts/system/code_review_system_prompt_v1_0.md"

  lessons_system:
    version: "2.0.0"
    file: "prompts/system/lessons_system_prompt_v2_0.md"

  persona_evaluator_system:
    version: "2.0.0"
    file: "prompts/system/persona_evaluator_system_prompt_v2_0.md"

# Playbooks (practical guides)
playbooks:
  ba_playbook:
    version: "4.0.0"
    file: "prompts/playbooks/ba_playbook_v4_0.md"

  coding_playbook:
    version: "4.0.0"
    file: "prompts/playbooks/coding_playbook_v4_0.md"

  solution_designer_playbook:
    version: "2.0.0"
    file: "prompts/playbooks/solution_designer_playbook_v2_0.md"

  qa_playbook:
    version: "2.0.0"
    file: "prompts/playbooks/qa_playbook_v2_0.md"

  code_review_playbook:
    version: "1.0.0"
    file: "prompts/playbooks/code_review_playbook_v1_0.md"

  lessons_playbook:
    version: "2.0.0"
    file: "prompts/playbooks/lessons_playbook_v2_0.md"

  persona_evaluator_playbook:
    version: "2.0.0"
    file: "prompts/playbooks/persona_evaluator_playbook_v2_0.md"

# Validation schemas
schemas:
  agent_prompt:
    version: "1.0.0"
    file: "schemas/agent_prompt.schema.yaml"

  project_manifest:
    version: "1.2.0"
    file: "schemas/project_manifest.schema.yaml"

  devops_manifest:
    version: "1.0.0"
    file: "schemas/devops_manifest.schema.yaml"

# Persona lens packs
lenses:
  creator_publishing:
    version: "1.0.0"
    file: "lenses/creator_publishing.yaml"

  fitness_training:
    version: "1.0.0"
    file: "lenses/fitness_training.yaml"

  quant_finance:
    version: "1.0.0"
    file: "lenses/quant_finance.yaml"

  saas_b2b:
    version: "1.0.0"
    file: "lenses/saas_b2b.yaml"

# Knowledge base
knowledge:
  devlessons:
    version: "117"  # Lesson count as version
    file: "knowledge/devlessons.md"
    last_updated: "2026-02-01"

# Compatibility requirements
compatibility:
  claude_code_min: "1.0.0"
  python_min: "3.11"

# Architecture patterns
patterns:
  backend-hexagonal:
    version: "1.0.0"
    path: "patterns/backend-hexagonal/"
    description: "Python hexagonal architecture (ports & adapters)"
    audit_script: "hex_audit.py"

  frontend-fsd:
    version: "1.0.0"
    path: "patterns/frontend-fsd/"
    description: "React/TypeScript Feature-Sliced Design"
    audit_script: "fsd-audit.ts"

  gitlab-ci-patterns:
    version: "1.1.0"
    path: "patterns/gitlab-ci/"
    description: "GitLab CI/CD templates for all deployment targets"
    templates:
      - python-fastapi.yml    # Fly.io backend
      - nextjs-frontend.yml   # Fly.io frontend
      - full-stack.yml        # Fly.io full-stack
      - azure-aks-python.yml  # Azure AKS
      - azure-functions-python.yml  # Azure Functions
      - databricks-jobs.yml   # Databricks

  devops-architecture:
    version: "1.0.0"
    path: "patterns/architecture/"
    description: "Portfolio-wide DevOps architecture documentation"
    files:
      - devops-portfolio-structure.md

# Exclusive permissions map (for governance validation)
exclusive_permissions:
  write_backend_code: back
  write_frontend_code: front
  execute_deployments: ops
  define_user_journeys: persona
